<head>

</head>

<script>
//
//$.ajax({
//    url: 'http://www.saimeil.com/xcxapi/uploadimg',
//    type: 'POST',
//    cache: false,
//    data: new FormData($('#uploadForm')[0]),
//    processData: false,
//    contentType: false
//}).done(function(res) {
//}).fail(function(res) {});
//

 $('#fileupload-form').on('submit',(function(e) {
       e.preventDefault();
       //序列化表单   
      var serializeData = $(this).serialize();
      
      // var formData = new FormData(this);
      $(this).ajaxSubmit({
           type:'POST',
           url: 'http://www.saimeil.com/xcxapi/uploadimg',
           dataType: 'json', 
           data: serializeData,            
           // data: formData,
           
           //attention!!!   
           contentType: false,      
           cache: false,             
           processData:false,      
             
           beforeSubmit: function() {
                   //上传图片之前的处理   
           },
           uploadProgress: function (event, position, total, percentComplete){ 
               //在这里控制进度条   
           },
           success:function(){
               
           },
           error:function(data){
               alert('上传图片出错');
           }
       });
   }));

//绑定文件选择事件，一选择了图片，就让`form`提交。   

   $("#fileupload").on("change", function() {
       $(this).parent().submit();
});
</script>
<body>

<form id="fileupload-form">    
     <input id="fileupload" type="file" name="file" >   
	 <button id="upload" type="button">upload</button>
</form>

</body>


</html>